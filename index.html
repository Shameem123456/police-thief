<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>SPY GAME Â· classified</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container glass">

    <!-- MAIN MENU -->
    <div id="screen-main">
        <h1 class="glitch">SPY GAME</h1>
        <button id="btn-create-screen" class="btn-primary" onclick="showScreen('screen-create')">ğŸ” Create Room</button>
        <button id="btn-join-screen" class="btn-secondary" onclick="showScreen('screen-join')">ğŸ•µï¸ Join Room</button>
    </div>

    <!-- CREATE ROOM -->
    <div id="screen-create" class="hidden">
        <h2>ğŸ“¡ new mission</h2>
        <input type="text" id="c-name" placeholder="Your codename" autocomplete="off">
        <div class="settings-grid">
            <div>
                <label>imposters</label>
                <select id="c-imposters">
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>
            </div>
            <div>
                <label>cycles</label>
                <select id="c-cycles">
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>
        </div>
        <button id="btn-create" class="btn-primary" onclick="doCreate()">ğŸš€ launch</button>
        <button id="btn-create-back" class="btn-secondary" onclick="showScreen('screen-main')">â† back</button>
    </div>

    <!-- JOIN ROOM -->
    <div id="screen-join" class="hidden">
        <h2>ğŸ›¸ join mission</h2>
        <input type="text" id="j-name" placeholder="Your codename" autocomplete="off">
        <input type="number" id="j-room" placeholder="Room ID (6 digits)" autocomplete="off">
        <button id="btn-join" class="btn-primary" onclick="doJoin()">ğŸ”Œ connect</button>
        <button id="btn-join-back" class="btn-secondary" onclick="showScreen('screen-main')">â† back</button>
    </div>

    <!-- LOBBY -->
    <div id="screen-lobby" class="hidden">
        <h2>ğŸ›¡ï¸ room: <span id="lobby-id"></span></h2>
        <div id="player-list" class="players-container">Loading agents...</div>
        <button id="btn-ready" class="btn-primary" onclick="doReady()">âœ… ready</button>
        <div id="lobby-msg" class="info-msg"></div>
    </div>

    <!-- REVEAL ROLE (flip card) -->
    <div id="screen-reveal" class="hidden">
        <h2>ğŸ­ your identity</h2>
        <p class="hint">touch & hold to reveal â€” memorise it.</p>
        <div class="reveal-container"
            onmousedown="holdCard(true)"
            onmouseup="holdCard(false)"
            ontouchstart="holdCard(true)"
            ontouchend="holdCard(false)">
            <div class="flip-card">
                <div class="card-front">â¬› hold</div>
                <div class="card-back" id="secret-word">???</div>
            </div>
        </div>
        <button id="btn-reveal-ready" class="btn-primary" onclick="revealReady()">âœ”ï¸ i remember</button>
        <div id="reveal-msg" class="info-msg"></div>
    </div>

    <!-- MAIN GAME (word submission) -->
    <div id="screen-game" class="hidden">
        <h2>ğŸŒ€ cycle <span id="cycle-num">1</span></h2>
        <div id="turn-indicator" class="turn-light">â³ waiting for turn...</div>
        
        <div id="word-history" class="history-panel"></div>

        <input type="text" id="game-word" placeholder="type a related word..." autocomplete="off">
        <button id="btn-submit-word" class="btn-primary" onclick="submitWord()">ğŸ“¤ send</button>
    </div>

    <!-- VOTING SCREEN -->
    <div id="screen-vote" class="hidden">
        <h2>âš–ï¸ identify imposter</h2>
        <p class="hint">select your target</p>
        <div id="vote-list" class="vote-grid"></div>
        <button id="btn-cast-vote" class="btn-primary" onclick="submitVote()" disabled>ğŸ”’ confirm vote</button>
    </div>

    <!-- MISSION RESULT -->
    <div id="screen-result" class="hidden">
        <h2>ğŸ“‹ mission report</h2>
        <div id="result-display" class="result-box"></div>
        <button id="btn-new-game" class="btn-primary" onclick="location.reload()">ğŸ”„ new game</button>
    </div>

    <!-- GLOBAL CHAT (always visible during game) -->
    <div id="chat-section" class="hidden chat-panel">
        <div id="chat-display" class="chat-messages"></div>
        <div class="chat-controls">
            <select id="chat-target" class="chat-select">
                <option value="ALL">ğŸ“¢ all</option>
            </select>
            <input type="text" id="chat-input" placeholder="whisper..." autocomplete="off">
            <button id="btn-send-chat" onclick="sendChat()">ğŸ’¬</button>
        </div>
    </div>

    <!-- subtle loading indicator (global, shown during api calls) -->
    <div id="global-loader" class="loader-overlay hidden">
        <div class="pulse-dot"></div>
    </div>

</div>

<script src="script.js"></script>
</body>
      </html>
